version: 1.0
deploy:

  # configuration part, which is taken at the FIRST deployment of each branch
  bootstrap:
    # folders that are not copied to IONOS webspace
    excludes:

    # commands that are executed at the real webspace NOT at build servers AFTER copying new files
    post-deployment-remote-commands:
    - wp core download
    - wp config create --dbname=${{ secrets.WP_DB_NAME }} --dbuser=${{ secrets.WP_DB_USER }} --dbpass=${{ secrets.WP_DB_PASSWORD }} --dbhost=${{ secrets.WP_DB_HOST }} --dbcharset=${{ secrets.WP_DB_CHARSET }}
    - wp core install --admin_user=${{ secrets.WP_ADMIN_USER }} --admin_user=${{ secrets.WP_ADMIN_EMAIL }}
  # configuration part, which is taken at ALL FURTHER deployments of this branch
  recurring:
    excludes:
    - ./
    # commands that are executed at the real webspace NOT at build servers BEFORE copying new files
    pre-deployment-remote-commands:

    post-deployment-remote-commands:
    - wp core update
    - wp plugin update --all
    - wp theme update --all